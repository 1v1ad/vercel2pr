// prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id         Int      @id @default(autoincrement()) @map("id")
  vk_id      String   @unique                       @map("vk_id")
  first_name String   @default("")                  @map("first_name")
  last_name  String   @default("")                  @map("last_name")
  avatar     String   @default("")                  @map("avatar")
  balance    BigInt   @default(0)                   @map("balance")
  created_at DateTime @default(now())               @map("created_at")
  updated_at DateTime @default(now())               @map("updated_at")

  @@map("users")
}

model Event {
  id         Int      @id @default(autoincrement()) @map("id")
  user_id    Int?                                        @map("user_id")
  event_type String                                       @map("event_type")
  payload    Json?
  ip         String?
  ua         String?
  created_at DateTime @default(now())                     @map("created_at")

  @@index([user_id])
  @@index([event_type])
  @@map("events")
}
